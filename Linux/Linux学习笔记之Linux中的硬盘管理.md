# Linux学习笔记

## 项目7 Linux中的硬盘

### 7.1 硬盘分区及格式化

* 硬盘一般分为IDE硬盘、SCSI硬盘和SATA硬盘
* 在Linux中，IDE接口的设备被称为hd；SCSI和SATA接口的设备被称为sd，第一块硬盘被称作sda，第二块被称为sdb……依此类推
* Linux规定，一块硬盘只能存在4个主分区，分别被命名为sda1、sda2、sda3和sda4（此时不能再创建扩展分区）；逻辑分区则从5开始标识，每多一个逻辑分区，就在末尾的分区号上加1， **逻辑分区没有个数限制** 
* 相关指令
	- 查看分区情况：ls /dev | grep sd
	- 操作分区：fdisk /dev/sda
	- 格式化分区：mkfs -t ext4 /dev/sdb1，该指令的意思是将sdb1硬盘格式化为ext4
	- 挂载分区：mount /dev/sdb1 /sdb1，该指令的意思是将/dev/sdb1映射到目录/sdb1下
* Linux系统中，在/etc/fstab文件中存储了自动挂载文件系统的参数；在该文件未中写入 /dev/sdb1 /sdb1 ext4 defaults 0 0，该指令可以实现自动挂载sdb1分区，使得不用每次重启电脑需要重新挂载分区

<br/>

### 7.2 磁盘配额

* 限制磁盘配额，可以避免磁盘空间被某些用户用完
* 磁盘配额是系统管理员用来监控和限制用户或组对磁盘空间的使用情况的工具；可以保证所有用户都拥有自己独立的文件系统空间，确保用户使用系统空间的公平性和安全性
* 要使用磁盘限额，需满足相关条件：磁盘限额是针对分区的，只有分区才有磁盘限额的说法；需要内核的支持；分区的格式是ext4的文件系统才行；只有拥有管理员权限，才可以设置磁盘限额； **但是要注意，磁盘限额只能限制一般的用户，对root用户无效**
* 磁盘限额的基本概念
	- 硬限制（hard limit）：指的是每个用户或组可拥有的磁盘空间或文件的绝对数量，绝对不允许超过这个限制
	- 软限制（soft limit）：一个用户在文件系统可以拥有的最大磁盘空间和最多文件数量，在某个宽限期内可以暂时超过这个限制
	- 宽限时间（grace period）：默认为7天。如果7天后，用户使用磁盘空间的数量仍然超过软限制，则系统将会禁止此用户账号；要重新激活账号，必须由系统管理员来进行
* 相关命令
	|命令|说明|
	|:-----|:-----|
	|edquota|用于编辑磁盘配额|
	|setquota|用于设置磁盘配额，指定配额或软限制的时间|
	|quota|查看磁盘配额|
	|requota|报告磁盘空间配额的状况，明确显示出每位用户或每个组群已使用多少空间|
	|quotacheck|扫描文件系统，生成quota日志aquota.user和aquota.group文件|
	|quotastats|统计磁盘配额信息|
	|warnquota|给用户发警告|
	|quotaon|开启磁盘配额|
	|quotaoff|关闭磁盘配额|

<br/>

*未完，待续 ~*